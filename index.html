<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel='stylesheet' href='css/style.min.css'/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        
        <title>Хасанова Алина | Тестовое задание</title>
    </head>
    <body>
        <div class="container">
            
            <div class="sidebar">
                <nav class="navbar">
                    <div class="navbar__item">
                        <div class="logo">
                            <a href="#" >
                                <img src="icons/logo.svg" alt="logo">
                            </a>
                        </div>
                        <div class="navbar__row">
                            <div class="navbar__row__icon"> <img src="img/photo.jpg" alt="photo of a head of a department"></div>
                            <div class="navbar__row__title dropdown">
                                <div class="dropdown__city">Константинопольский филиал</div> 
                                <div class="dropdown__btn">
                                    <a href="">
                                        <img src="icons/arrow.svg" alt="dropdown button">
                                    </a>
                                </div>
                            </div>                     
                        </div>
                    </div>

                    <div class="navbar__item">
                        <a href="#"> 
                            <div class="navbar__row">
                            
                                <div class="navbar__row__icon">  <img src="icons/my_courses.svg" alt="my courses"></div>
                                <div class="navbar__row__title">
                                    Мои курсы 
                                </div>     
                                            
                            </div>
                        </a>

                        <a href="#"> 
                            <div class="navbar__row">
                            
                                <div class="navbar__row__icon">  <img src="icons/carier.svg" alt="carier"></div>
                                <div class="navbar__row__title">
                                    Карьера 
                                </div>     
                                            
                            </div>
                        </a>

                        <a href="#"> 
                            <div class="navbar__row">
                            
                                <div class="navbar__row__icon">  <img src="icons/structure.svg" alt="srtucture of the learning"></div>
                                <div class="navbar__row__title">
                                    Оргструктура
                                </div>     
                                            
                            </div>
                        </a>
                    </div>

                    <div class="navbar__item">
                        <a href="#"> 
                            <div class="navbar__row">
                            
                                <div class="navbar__row__icon">  <img src="icons/library.svg" alt="library"></div>
                                <div class="navbar__row__title">
                                    Библиотека курсов 
                                </div>     
                                            
                            </div>
                        </a>

                        <a href="#"> 
                            <div class="navbar__row">
                            
                                <div class="navbar__row__icon">  <img src="icons/courses.svg" alt="all courses"></div>
                                <div class="navbar__row__title">
                                    Дисциплины КЦПК 
                                </div>     
                                            
                            </div>
                        </a>
                        <a href="#"> 
                            <div class="navbar__row fold-btn">
                            
                                <div class="navbar__row__icon">  <img src="icons/fold.svg" alt="press to fold"></div>
                                <div class="navbar__row__title">
                                    Свернуть
                                </div>     
                                            
                            </div>
                        </a>
                    </div>
                   
                    
                </nav>
                
            </div>
            
            <div class="content">
                
                    <header class="header">
                        <div class="header__flex-wrapper">
                            <a href="">
                                <div class="back-btn">
                                    <div class="navbar__row header__navbar__row">
                                
                                        <div class="navbar__row__icon header__navbar__row__icon">  <img src="icons/back_arrow.svg" alt="return back"></div>
                                        
                                        <div class="navbar__row__title header__navbar__row__title">
                                        Назад 
                                        </div>     
                                                
                                    </div>
                               
                                </div>
                            </a> 
                            
                            <div class="header__icons">
                                <div class="icon-round">
                                    <img src="icons/bell.svg" alt="notifications">
                                    <div class="notification"></div>
                                </div>
                                <div class="icon-round">
                                    <img src="icons/chat.svg" alt="chat">
                                    <div class="news">12</div>
                                    <div class="notification"></div>
                                </div>
                            </div>
                        </div>
                        
                    </header>
                    <main class="main">
                        <h1>Мои цели</h1>
                        <div class="goals">
                            <div class="goal">
                                <div class="picture hidden">
                                    <div class="picture__wrapper">
                                        <div>
                                            <img class="flag" src="icons/Flag.svg" alt="">
                                            <img src="img/mountain.svg" alt="the progress">
                                            <div class="path"> </div>
                                            <div class="path path__progress"> </div>
                                            <div class="path__steps">    
                                                <div class="path__step">
                                                    <div class="branch  "></div>
                                                    <div class="branch__goal">
                                                        
                                                        <div class="branch__goal__name">
                                                            Старший мастер
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="path__step current">
                                                    <div class="branch"></div>
                                                    <div class="branch__goal">
                                                        <div class="branch__goal__name">
                                                            Мастер участка
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="goal__info">
                                    <div class="goal__descr">
                                        <div class="goal__header">
                                            <h3 class="goal__number bold-roboto">Цель № 1</h3> 
                                            <div class="goal__edit">
                                                <div class="goal__edit__icon"><img src="icons/pencil.svg" alt="edit"></div>
                                                <div class="goal__edit__icon"><img src="icons/bin.svg" alt="delete"></div>
                                            </div>
                                        </div>
                                        <div class="goal__text">
                                            <div class="field">
                                                Должность
                                            </div>
                                            <h3 class="bold-roboto">
                                                Старший мастер
                                            </h3>
                                        </div>
                                        <div class="goal__text">
                                            <div class="field">
                                                Цех
                                            </div>
                                            <div class="bold-roboto">
                                                ЛПЦ 11: Отделение регенерации соляно-кислотных растворов
                                            </div>
                                        </div>
    
                                    </div>
                                    <div class="goal__criteria">
                                        <div class="goal__criteria__title"> 
                                            <div>КРИТЕРИИ ДОСТИЖЕНИЯ</div>
                                            <div class="goal__criteria__svg"><img src="icons/round-info.svg" alt="info"></div>
                                            <div class="goal__criteria__hint hidden">Чтобы достигнуть цели, надо пройти все уровни</div>
                                        </div>
                                        <div class="goal__criteria__current bold-roboto">
                                            <div>Мастер участка</div> 
                                            <div><img src="icons/flag-small.svg" alt="red flag"></div> 
                                    </div>
                                        <ul class="goal__steps">
                                            <li class="green">Word</li>
                                            <li class="green">Exсel</li>
                                            <li class="green">Powerpoint</li>
                                            <li class="green">OEBS</li>
                                            <li class="green">Уровень владения английским</li>
                                            <li class="grey">Результаты тестирования ЕОПЗ</li>
                                            <li class="grey">Тестирование по общим вопросам</li>
                                            <li class="green">Тестирование по специальным вопросам</li>
                                            <li class="green">Результат аттестации РСС</li>
                                            <li class="big green">Опыт работы руководителем</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="goal">
                                <div class="picture hidden">
                                    <div class="picture__wrapper">
                                        <div>
                                            <img class="flag" src="icons/Flag.svg" alt="">
                                            <img src="img/mountain.svg" alt="the progress">
                                            <div class="path"> </div>
                                            <div class="path path__progress"> </div>
                                            <div class="path__steps">    
                                                
                                                <div class="path__step">
                                                    <div class="branch "></div>
                                                    <div class="branch__goal">
                                                        <div class="branch__goal__name">
                                                            Начальник цеха
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="path__step ">
                                                    <div class="branch"></div>
                                                    <div class="branch__goal">
                                                        <div class="branch__goal__name">
                                                            Зам. начальника
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="path__step current">
                                                    <div class="branch"></div>
                                                    <div class="branch__goal">
                                                        <div class="branch__goal__name">
                                                            Старший мастер
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="path__step achieved">
                                                    <div class="branch"></div>
                                                    <div class="branch__goal">
                                                        <div class="branch__goal__name">
                                                            Мастер участка
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="goal__info">
                                    <div class="goal__descr">
                                        <div class="goal__header">
                                            <h3 class="goal__number bold-roboto">Цель № 2</h3> 
                                            <div class="goal__edit">
                                                <div class="goal__edit__icon"><img src="icons/pencil.svg" alt="edit"></div>
                                                <div class="goal__edit__icon"><img src="icons/bin.svg" alt="delete"></div>
                                            </div>
                                        </div>
                                        <div class="goal__text">
                                            <div class="field">
                                                Должность
                                            </div>
                                            <h3 class="bold-roboto">
                                                Начальник цеха 
                                            </h3>
                                        </div>
                                        <div class="goal__text">
                                            <div class="field">
                                                Цех
                                            </div>
                                            <div class="bold-roboto">
                                                ЛПЦ 11: Пятиклеевой стан холодной прокатки
                                            </div>
                                        </div>
    
                                    </div>
                                    <div class="goal__criteria">
                                        <div class="goal__criteria__title"> 
                                            <div>КРИТЕРИИ ДОСТИЖЕНИЯ</div>
                                            <div class="goal__criteria__svg"><img src="icons/round-info.svg" alt="info"></div>
                                            <div class="goal__criteria__hint hidden">Чтобы достигнуть цели, надо пройти все уровни</div>
                                        </div>
                                        <div class="goal__criteria__current bold-roboto">
                                            <div>Старший мастер</div> 
                                            <div><img src="icons/flag-small.svg" alt="red flag"></div> 
                                    </div>
                                        <ul class="goal__steps">
                                            <li class="green">Word</li>
                                            <li class="green">Exсel</li>
                                            <li class="green">Powerpoint</li>
                                            <li class="green">OEBS</li>
                                            <li class="green">Уровень владения английским</li>
                                            <li class="grey">Результаты тестирования ЕОПЗ</li>
                                            <li class="grey">Тестирование по общим вопросам</li>
                                            <li class="green">Тестирование по специальным вопросам</li>
                                            <li class="green">Результат аттестации РСС</li>
                                            <li class="big green">Опыт работы руководителем</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="status">
                            
                            <div class="status__wrapper">
                                <div class="status__header status_row">ТЕКУЩИЙ СТАТУС</div>
                                <div class="status__row goal__text">
                                    <div class="field">
                                        Должность
                                    </div>
                                    <h3 class="bold-roboto">
                                        Мастер участка
                                    </h3>
                                </div>
                                <div class="status__row goal__text">
                                    <div class="field">
                                        Цех
                                    </div>
                                    <div class="bold-roboto">
                                        ЛПЦ 11: Пятиклеевой стан холодной прокатки
                                    </div>
                                </div>
                                <div class="status__row goal__text">
                                    <div class="field">
                                        Уровень
                                    </div>
                                    <div class="bold-roboto">
                                        4 уровень
                                    </div>
                                </div>
                                <div class="status__row btn">
                                    <button class="btn_add">
                                        Добавить цель
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>
               
            </div>

        </div>
        <script>
            {
                document.addEventListener("DOMContentLoaded", () => {
                   
                    const goalCards = document.querySelectorAll('.goal')
                    goalCards.forEach((card, i) => {
                        
                        const paths = card.querySelectorAll('.path__step')
                        paths.forEach((path, index) => {
                            if((index+1) % 2 === 1) {
                            path.classList.add('path__step_odd')
                            }else{
                            path.classList.add('path__step_even')
                            }
                        })                    
                    
                        const listOfSteps = card.querySelectorAll('.path__step')
                        const numberOfSteps = listOfSteps.length
                        let greenBarHeight
                        let achievedStep
                        const greenBar = card.querySelector('.path__progress')
                        listOfSteps.forEach((item, index) => {
                            item.addEventListener('dblclick', (e)=> {
                                item.classList.add('current')
                                item.classList.remove('achieved')
                                listOfSteps.forEach((step, i) => {
                                    if (i !== index) {
                                        step.classList.remove('current')
                                        step.classList.remove('achieved')
                                    }
                                
                                    if (i > index) {
                                        step.classList.add('achieved')
                                        step.classList.remove('current')
                                    }
                                })
                                if(item.classList.contains('current')) {
                                    if (index < numberOfSteps-1) {             
                                        achievedStep = listOfSteps.length - index - 2   
                                        greenBarHeight = 36 + (517 - 62)/(numberOfSteps-1) * achievedStep + 1*achievedStep
                                    } else {
                                        achievedStep = 0
                                        greenBarHeight = 0
                                    }
                                
                                    greenBar.style.height = greenBarHeight + "px"
                                }   
                            
                            })
                            
                            
                        })
                       
                        listOfSteps.forEach((item, index) => {
                            if(index === 0 && item.classList.contains('achieved')) {
                                    greenBar.style.height = 517 +"px"
                            }
                            if(item.classList.contains('current')) {
                                if(index < numberOfSteps-1) {             
                                    achievedStep = listOfSteps.length - index - 2   
                                    greenBarHeight = 36 + (517 - 62)/(numberOfSteps-1) * achievedStep + 1*achievedStep
                                } 
                                else {
                                    achievedStep = 0
                                    greenBarHeight = 0
                                }
                                greenBar.style.height = greenBarHeight +"px"
                                
                            }   
                            
                        })

                        const flag = card.querySelector(".flag")
                        flag?.addEventListener('dblclick', () => {
                            listOfSteps.forEach(step => {
                                step.classList.add('achieved')
                                step.classList.remove('current')
                            })
                            greenBar.style.height = 517 + "px"
                        })
                        if (listOfSteps.length === card.querySelectorAll(".achieved").length) {
                            greenBar.style.height = 517 + "px"
                        }
                        
                        
                        let infoIcon = card.querySelector('.goal__criteria__svg')
                        infoIcon.addEventListener('mouseenter', () => {
                            const hint = card.querySelector('.goal__criteria__hint')
                            hint.classList.remove('hidden')
                        })
                        
                        infoIcon.addEventListener('mouseleave', () => {
                            const hint = card.querySelector('.goal__criteria__hint')
                            hint.classList.add('hidden')
                        })

                    })

                    window.onload = () => {
                        const pictures = document.querySelectorAll('.picture')
                        pictures.forEach(picture => picture.classList.remove('hidden'))
                    }

                })

            }
        </script>
    </body>
</html>